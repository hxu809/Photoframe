<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互动相框 - Interactive Photoframe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #ffffff;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        .container {
            position: relative;
            width: 1920px;
            height: 1080px;
        }

        /* 画作容器 - 在相框背后 */
        .artwork-container {
            position: absolute;
            left: 663px;
            top: 186px;
            width: 950px;
            height: 724px;
            overflow: hidden;
            z-index: 1;
        }

        /* 滚筒滚动区域 */
        .artwork-scroll {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1);
        }

        /* 单个画作 */
        .artwork {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
        }

        .artwork img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        /* 相框 - 覆盖在画作上方 */
        #photoframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 画作容器 - 必须在相框之前渲染，这样相框才能覆盖在上面 -->
        <div class="artwork-container">
            <div class="artwork-scroll" id="artworkScroll">
                <div class="artwork" data-index="0" style="top: 0;">
                    <img src="Guohua.svg" alt="国画">
                </div>
                <div class="artwork" data-index="1" style="top: 724px;">
                    <img src="Starrysky.svg" alt="星空">
                </div>
                <div class="artwork" data-index="2" style="top: 1448px;">
                    <img src="Ukiyoe.svg" alt="浮世绘">
                </div>
            </div>
        </div>

        <!-- 相框 SVG - 覆盖在画作上方 -->
        <object id="photoframe" data="Photoframe.svg" type="image/svg+xml"></object>
    </div>

    <script>
        let currentIndex = 0;
        let isScrolling = false;
        let lastScrollTime = 0;
        const ARTWORK_HEIGHT = 724; // 画作高度
        const SCROLL_COOLDOWN = 1000; // 滚动冷却时间（毫秒）

        // 获取元素
        const artworkScroll = document.getElementById('artworkScroll');
        const TOTAL_ARTWORKS = 3;

        // 滚筒滚动到指定画作
        function scrollToArtwork(index) {
            if (index === currentIndex || isScrolling) return;

            // 防抖控制
            isScrolling = true;

            // 计算滚动位置（向上移动为负值）
            const scrollY = -index * ARTWORK_HEIGHT;
            artworkScroll.style.transform = `translateY(${scrollY}px)`;

            // 更新当前索引
            currentIndex = index;

            // 解除防抖（与CSS transition时间匹配）
            setTimeout(() => {
                isScrolling = false;
            }, 800);
        }

        // 滚轮事件监听（带滚动阈值控制）
        document.addEventListener('wheel', (e) => {
            e.preventDefault();

            const currentTime = Date.now();

            // 检查是否在冷却时间内
            if (isScrolling || (currentTime - lastScrollTime) < SCROLL_COOLDOWN) {
                return;
            }

            lastScrollTime = currentTime;

            // 只响应明显的滚动动作（阈值过滤）
            if (Math.abs(e.deltaY) > 10) {
                if (e.deltaY > 0) {
                    // 向下滚动 - 下一张（画作向上移动）
                    const nextIndex = (currentIndex + 1) % TOTAL_ARTWORKS;
                    scrollToArtwork(nextIndex);
                } else {
                    // 向上滚动 - 上一张（画作向下移动）
                    const prevIndex = (currentIndex - 1 + TOTAL_ARTWORKS) % TOTAL_ARTWORKS;
                    scrollToArtwork(prevIndex);
                }
            }
        }, { passive: false });

        // 键盘事件监听
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
                const nextIndex = (currentIndex + 1) % TOTAL_ARTWORKS;
                scrollToArtwork(nextIndex);
            } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
                const prevIndex = (currentIndex - 1 + TOTAL_ARTWORKS) % TOTAL_ARTWORKS;
                scrollToArtwork(prevIndex);
            }
        });
    </script>
</body>
</html>
